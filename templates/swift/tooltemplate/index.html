{% extends "swift/layout/user_base.html" %} {% load static %} {% block body_block %}
<div class="content-inner full-screen">
    <div class="page-block">
       
        <div class="d-flex justify-content-between">
            <h1 class="page-block-title">Add Tool Template</h1>
            
        </div>

        <div>
            <form method="post" action="" id="toolTemplateInputForm" >
                {% csrf_token %}
                
                <div class="prompt-form" id="prompt-out-form-div">
                    <div class="formbg-inner">
                            <input type="hidden" value="{% url 'appswift:tooltemplate_input_create' %}" id="form_url" name="form_url">
                        <div class="edit-prompt-form">
                         <div class="col-lg-6">
                            <div class="field padding-bottom--24">
                                <label for="name">Tool Type</label> {{form.tool_type}}
                                <p class="text-danger mt-2 mb-0">{{ form.tool_type.errors.as_text  }}</p>
                            </div>
                            <div class="field padding-bottom--24">
                                <label for="name">Name</label> {{form.tool_name}}
                                <p class="text-danger mt-2 mb-0">{{ form.tool_name.errors.as_text  }}</p>
                            </div>

                            <div class="field padding-bottom--24">
                                <label for="name">tool context</label> {{form.tool_context}}
                                <p class="text-danger mt-2 mb-0">{{ form.tool_context.errors.as_text  }}</p>
                            </div>
                                
                            <div class="field padding-bottom--24">
                                <label for="name">Youtube_link</label> {{form.youtube_link}}
                                <p class="text-danger mt-2 mb-0">{{ form.youtube_link.errors.as_text  }}</p>
                            </div>
                         </div>



                            <div class="d-flex justify-content-between">
                                <h1 class="page-block-title">Inputs</h1>
                            </div>    

                            <div class="row" >
                                <!-- <div class="col-lg-12">
                                    <div class="row" >
                                        <div class="col-lg-3">
                                            <div class="field padding-bottom--24">
                                                <label for="name">Inputs</label> {{inp_form.tool_input}}
                                                <p class="text-danger mt-2 mb-0">{{ inp_form.tool_input.errors.as_text }}</p>
                                            </div>
                                        </div>
                                        <div class="col-lg-3">
                                            <div class="field padding-bottom--24">                                        
                                            <a class="add-input-details" id="create_input_details" data-fancybox="" data-src="#inputdetails-popup"  data-url="{% url 'appswift:tooltemplate_input_create'%}">
                                                <button type="button" class="btn btn-primary">Add More details</button>
                                            </a>  
                                            </div>
                                        </div>
                                        <div class="col-lg-3">
                                            <div class="field padding-bottom--24">
                                                <label for="name">Validation Message</label> {{inp_form.validation_message}}
                                                <p class="text-danger mt-2 mb-0">{{ inp_form.validation_message.errors.as_text }}</p>
                                            </div>
                                        </div>

                                        <div class="col-lg-3">
                                            <div class="field padding-bottom--24">
                                                <label for="name">Sort Order</label> {{inp_form.sort_order}}
                                                <p class="text-danger mt-2 mb-0">{{ inp_form.sort_order.errors.as_text }}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div> -->

                                {{ item_formset.management_form }}
                                <table class="table">
                                  <thead>
                                    <tr>
                                      <th>Input</th>
                                      <th>Input Details</th>
                                      <th>Validation Message</th>
                                      <th>Sort Order</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    {% for form in item_formset.forms %}
                                    <tr class=" form_set_row ">
                                        {% for hidden in form.hidden_fields %}
                                            {{ hidden }}
                                        {% endfor %}
                                        {{form.id}}
                                      <td >{{ form.tool_input }}</td>
                                      <td>
                                        <a class="add-input-details" id="create_input_details" data-fancybox="" data-src="#inputdetails-popup"  data-url="{% url 'appswift:tooltemplate_input_create'%}">
                                        <button type="button" class="btn btn-primary">Add More details</button>
                                        </a>
                                    </td>
                                      <td >{{ form.validation_message }}</td>
                                      <td >{{ form.sort_order }}</td>

                                      
                                    </tr>
                                    {% endfor %}
                                  </tbody>
                                </table>


                            </div>
                           


                            <div class="field padding-bottom--24">
                                <input class="tooltemplate-submit" id="tooltemplate-submit" type="submit" name="submit" value="Save">
                            </div>
                        </div>


                       


                    </div>
                </div>
            </form>
        </div>
    </div>

    <div>
        <!-- Curriculum Add form starts-->
        <div class="add-inputdetails" id="inputdetails-popup" style="display:none;">
            <div class="pop-body" id="inputdetails-div">
                <div class="formbg-inner">
                    <form method="post" action="" class="InputDetailsForm" id="InputDetailsForm" name="InputDetailsForm" >
                        {% csrf_token %}
                        <input type="hidden" value="{% url 'appswift:tooltemplate_input_create' %}" id="form_url" name="form_url">
                        <h2 class="padding-bottom--15" id="popup_head">Add Input Details</h2>
                        <div class="inputdetails-form" id="inputdetails-form-div">
                            
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Curriculum Add form ends -->
    </div>


</div>
</div>
{% endblock body_block %} 
{% block page_script %}
<script src="{% static '/swift/assets/js/tooltemplate.js' %}?v={% now 'd_m_yH:i:s'%}"></script>
<script src="{% static '/swift/assets/js/formset.js' %}?v={% now 'd_m_yH:i:s'%}"></script>

<script>
    $(document).ready(function () {
        // Your first script for formset
      $('.form_set_row').formset({
            addText: '<span>Add Input</span>',
            deleteText: '<i class="fa-solid fa-xmark" ></i>',
            prefix: '{{ item_formset.prefix }}',
            formCssClass: 'dynamic-formset',
            added: function (row) {
                // Handle additional logic after adding a form
            },added: function (row) {
              $(row).find('select').addClass('select');
              $(row).find('select').prop('required');
              $(row).find('select.select').select2();
            },
            removed: function (row) {
              updateTotals()
            }
        });
    });
    
    
    
    
</script>

{% endblock page_script %}